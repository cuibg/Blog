## 《图解TCP/IP（第5版）》读书笔记

了解计算机网络相关知识对一名程序员来说是必不可少的。大学时学过这门课，只可惜基本都已还给老师。为了系统掌握计算机网络方面的基础内容，特地选择了《图解TCP/IP（第5版）》这本书。

这是一本入门级教材，全书以图文并茂的方式，从计算机网络的诞生开始讲起，简单的介绍了TCP/IP协议簇的知识，适合0基础或者基础薄弱的同学使用。

以下都是我认为本书中值得我注意的知识点，摘抄下来以备温习：

#### 第一章 网络基础知识

######## 计算机和计算机网络发展的7个阶段

计算机网络的发展离不开计算机的发展，从20世纪50年代计算机开始普及到现在，计算机的使用模式发生了诸多变化。计算机与网络的发展大致可分为7个阶段。

* 批处理

最初，计算机的价格昂贵体积巨大，无法再一般得办公场所中使用，通常放置在专门的计算机管理中心；再加上计算机操作起来相当复杂，必须由专门的管理人员处理。计算机的这种特点，使得用户只能事先将程序和数据装入卡带或磁带送到这样的中心去运行，过些时日再来取结果。

批处理时代的计算机主要用于大规模计算或处理。

* 分时系统

随后，20世纪60年代出现了分时系统（TTS）。它是指多个终端（由键盘、显示器等输入输出设备组成）与同一台计算机相连，允许多个用户同时使用一台计算机系统。这依然是因为计算机的造价过于昂贵，一人一机对一般人来说不可能实现。但分时系统给用户的感觉就像是一个人完全在使用一台计算机一样。

正是从这一时期开始，网络（通信）与计算机之间的关系逐渐浮出水面。小型机也随即产生，办公场所与工厂逐渐引入计算机。

* 计算机之间的通信

20世纪70年代，计算机性能有了飞速发展，体积也趋于小型化，同时价格急剧下降，使得计算机从科研机关逐渐走向企业。为了提高效率，人们开始研究计算机与计算机之间的通信技术。

计算机通信显著提高了计算机的可用性，人们不再局限使用一台计算机进行处理，而是逐渐使用多台计算机分布式处理，最终一并得到返回结果。

从此，计算机的发展进入了一个崭新的历史阶段。


* 计算机网络的产生

20世纪70年代初期，人们开始实验基于分组交换技术的计算机网络，并着手研究不同厂商的计算机之间相互通信技术。

80年代，一种能够互联多种计算机的网络随即产生，它能够练级从大型超级计算机到小型机的各式各样的计算机。具有GUI图形界面的操作系统的出现更拉近了人们与网络之间的距离，使得用户体会到了网络的便捷之处。

* 互联网的普及

进入20世纪90年代，有些公司和大学已经具备了一人一机的环境。人们期望一个连接不同厂商的不同机型的成本更低的网络环境，于是出现了连接异构型计算机的通信网络技术----互联网技术。

个人电脑在诞生之初可以说是一种单机模式的工具，而现在它则被更广泛的应用于互联网的访问。

* 以互联网技术为中心的时代

互联网的普及和发展对通信领域产生了巨大影响，许多发展道路各不相同的网络技术也都在向互联网靠拢。例如，曾经一直作为通信基础设施、支撑通信网络的电话为，其地位也随着时间的推移为IP(Internet Protocol)网所取代。并且，能够联网的设备也不仅限于单纯的计算机，还扩展到了手机、家用电器、游戏机等许多其它产品。

* 从"单纯建立连接"到"安全建立连接"

互联网普及的初期，人们更关注单纯的连接性，以不受任何限制地建立互联网连接为最终目的。而现在，人们更追求"安全建立连接"的目标。


######## 计算机网络标准化过程

* 协议的标准化

`ISO`制定了一个国际标准`OSI`，对通信系统进行了标准化。由于种种原因，`OSI`并没有得到普及，但是在`OSI`协议设计之初作为其指导方针的OSI参考模型却常被用于网络协议的制定当中。

`TCP/IP`是由`IETF`建议的、致力于推进其标准化作业的一种协议，后来逐渐成为业界标准，被广泛应用。

######## 传输方式的分类

网络与通信中可以根据其数据发送方法进行多种分类：

* 面向有连接型与面向无连接型

面向有连接型发送数据前需要在收发主机之间建立一条通信线路；

面向无连接则不需要建立和断开连接。

* 电路交换与分组交换

电路交换技术相对久远，主要用于过去的电话网，交换机负责数据的中转处理。计算机首先被连接到交换机上，而交换机与交换机之间则由众多通信线路再继续连接。因此计算机之间发送数据时，需要通过交换机与目标主机建立通信电路，电路建好后，用户可以一直使用，直到连接被断开为止。独占线路意味着这段时间内其它用户都用不了，如果并发用户数超过交换机之间的通信线路数，通信根本无法实现。

在分组交换中，计算机与路由器之间以及路由器和路由器之间通常只有一条通信线路，因此，这条线路其实是共享线路。

电路交换中，由于独占线路，传输速度不会发生改变；分组交换中，通信线路的速度根据网络拥堵情况可能会发生变化，甚至出现分组数据丢失、无法发送到对端的情况。

* 根据接收端数量分类

网络通信中，可以根据目标地址的个数及后续行为对通信进行分类，如单播、多播、广播等。

######## 网络的构成要素

搭建一套网络环境要设计各种各样的电缆和网络设备，主要有：

* 网卡（NIC）

使计算机联网的设备

* 中继器			
 
 从物理层延长网络的设备。由电缆传过来的电信号或者光信号经过中继器波形调整和放大再传给另一个电缆。

集线器也可以看做多端口的中继器。

* 网桥/2层交换机	

从数据链路层延长网络的设备

* 路由器/3层交换机	

通过网络层转发分组数据的设备

* 4-7层交换机		

处理传输层以上各层网络传输的设备

* 网关				

负责将从传输层到应用层的数据进行转换和转发的设备。

#### 第二章 TCP/IP基础知识

在计算机网络领域中，TCP/IP协议可谓名气最大、使用范围最广。

######## TCP/IP出现的背景及其历史

ARPANET利用几所大学与研究机构组成的主干网络进行分组交换和在互联计算机之间提供可靠传输的综合性通信协议的实验。到20世纪70年代前半叶，ARPANET中的一个研究机构研发了TCP/IP。在这之后，知道1982年，TCP/IP的具体规范内容才被最终定下来，并与次年成为ARPANET网络唯一指定的协议。

######## TCP/IP的标准化

* TCP/IP的具体含义

TCP/IP协议是利用IP进行通信时所必须用到的协议群的统称，该协议又被成为网际协议族。

* TCP/IP标准化精髓

TCP/IP协议的标准化过程具有两大特点：开放性和实用性。

开放性是由于TCP/IP的协议是由IETF讨论制定的，而IETF本身就是一个允许任何人加入讨论的组织。

在TCP/IP的标准化过程中，制定某一协议的规范本身已经不再那么重要，而首要任务是实现真正能够实现通信的技术。有人打趣道“TCP/IP简直是先开发程序，后写规格标准”。

* TCP/IP规范--RFC

TCP/IP中需要标准化的协议，被人们列入RFC(Request For Comment)文档并在网上公布、

######## 互联网基础知识

* 互联网定义

互联网是一个专有名词，对应的英文单词`The Internet`，指的是由ARPANET发展而来、互联全世界的计算机网络。

* 互联网与TCP/IP的关系

互联网进行通信时，需要相应的网络协议，TCP/IP原本就是为使用互联网而开发制定的协议族。因此，二者的关系是：互联网使用的协议是TCP/IP。

######## TCP/IP协议分层模型

* TCP/IP与OSI参考模型

二者关系如图所示：

![TCP/IP-OSI](https://github.com/wangzz/Blog/blob/master/image/%E3%80%8A%E5%9B%BE%E8%A7%A3TCP:IP%EF%BC%88%E7%AC%AC5%E7%89%88%EF%BC%89%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/7-10.jpg)

不难看出，OSI参考模型注重通信协议必要的功能是什么，而TCP/IP则强调在计算机上实现协议应该开发那种程序，即更看重实用性。

* 硬件

TCP/IP最底层负责数据传输的硬件，这种硬件相当于以太网或电话线等物理层的设备。

* 网络接口层

利用以太网中的数据链路层进行通信。

* 互联网层

使用IP协议，相当于OSI模型中的第三层网络层。TCP/IP分层中的`互联网层与传输层的功能通常由操作系统`提供。尤其是路由器，它必须实现通过互联网层转发分组数据包的功能。

此外，连接互联网的所有主机和路由器都必须实现IP的功能。其他连接互联网的网络设备（如网桥、中继器或集线器）就没必要一定实现IP或TCP的功能。

* 传输层

TCP/IP的传输层有两个具有代表性的协议：TCP/UDP，该层的功能与OSI参考模型中的传输层类似。

* 应用层

TCP/IP的分层中，将OSI参考模型中的会话层、表示层和应用层的功能都集中到了应用程序中实现。

######## TCP/IP分层模型与通信示例

* 数据包首部

每个分层中，都会对所发送的数据附加一个首部，这个首部中包含了该层必要的信息，如发送的目标地址以及协议相关信息。

包、帧、数据报、段、消息的区别：

以上五个术语都用来表述数据的单位，包可以说是全能性述语；帧用于表示数据链路层中包的单位；数据报是IP/UDP等网络层以上分层中包的单位；段则表示TCP数据流中的信息；消息是应用协议中数据的单位。


